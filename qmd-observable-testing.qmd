---
title: "Observable + Quarto - 3 ways"
format: html
editor: visual
execute:
  echo: fenced
  message: false
  warning: false
---

The goal of this document is to explore and compare workflow options for people working in Observable and Quarto.

## 1. `robservable` package:

The [`robservable`](https://juba.github.io/robservable/) R package "allows the use of [Observable](https://observablehq.com/) notebooks (or parts of them) as `htmlwidgets` in R."[^1]

[^1]: https://juba.github.io/robservable/

```{r}
library(robservable)
```

```{r}
robservable(
  "@observablehq/test-observable-quarto",
  include = c("staticChart")
)
```

### With an input: 

```{r}
robservable(
  "@observablehq/test-observable-quarto",
  include = c("viewof dogRadio", "chart")
)
```

## 2. `import`:

Within `{ojs}` cells in a .qmd, we can use [imports](https://observablehq.com/@observablehq/import) to access named cells from an Observable notebook:

```{ojs}
import {staticChart} from "@observablehq/testing-robservable"
```

```{ojs}
staticChart
```

## 3. `{ojs}` cells:

Or, we can write code directly in `{ojs}` cells:

```{ojs}
data = [{name: "Teddy", weight: 50},
             {name: "Khora", weight: 60},
             {name: "Waffle", weight: 35},
             {name: "Banjo", weight: 40},
             {name: "Tallie", weight: 55}]
```

```{ojs}
Plot.plot({
  marks: [
    Plot.barY(data, {x: "name", y: "weight", sort: {x: "y", reverse: true}}),
    Plot.ruleY([0])
  ]
})
```

### With an input:

```{ojs}
viewof dogRadio = Inputs.radio(data.map(d => d.name), {label: "Select one:", value: "Teddy"})
```

```{ojs}
Plot.plot({
  marks: [
    Plot.barY(data, {x: "name", y: "weight", fill: d => d.name === dogRadio ? "red" : "#ccc", sort: {x: "y", reverse: true}}),
    Plot.ruleY([0])
  ]
})
```

## 4. Embeds

You can embed an iframe in a raw html code block:

````         
```{=html}
<iframe width="100%" height="519" frameborder="0"
  src="https://observablehq.com/embed/@observablehq/test-observable-quarto@31?cells=viewof+dogRadio%2Cchart"></iframe>
```
````

```{=html}
<iframe width="100%" height="519" frameborder="0"
  src="https://observablehq.com/embed/@observablehq/test-observable-quarto@31?cells=viewof+dogRadio%2Cchart"></iframe>
```
